<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SWADE Character Builder</title>
    <style>
        :root { --primary: #2c3e50; --accent: #e67e22; --edge: #27ae60; --gear: #2980b9; --bg: #f4f7f6; --error: #c0392b; --hind: #8e44ad; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); display: grid; grid-template-columns: 380px 1fr 1fr; gap: 20px; padding: 20px; color: var(--primary); margin: 0; }
        .panel { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); height: fit-content; }
        .header-inputs { display: flex; gap: 10px; margin-bottom: 10px; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 4px; flex: 1; }
        .derived-bar { display: flex; gap: 10px; margin-bottom: 20px; }
        .stat-box { flex: 1; background: var(--primary); color: white; text-align: center; padding: 10px; border-radius: 6px; }
        .stat-box span { display: block; font-size: 10px; text-transform: uppercase; opacity: 0.8; }
        .stat-box strong { font-size: 22px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-bottom: 15px; }
        .stat-pill { background: var(--primary); color: white; padding: 2px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .overspent { background: var(--error) !important; }
        .row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .die-val { font-weight: bold; width: 45px; text-align: center; color: var(--accent); font-size: 16px; }
        button { cursor: pointer; border: 1px solid #ccc; background: white; border-radius: 4px; padding: 4px 8px; font-size: 13px; }
        .remove-btn { color: var(--error); border: none; background: none; cursor: pointer; font-weight: bold; }
        .card { border-left: 5px solid #ddd; margin-bottom: 12px; padding: 12px; background: #fff; border-radius: 4px; cursor: pointer; }
        .card.selected { border-left-color: var(--edge); background: #f0fff4; border-right: 6px solid var(--edge); }
        .card-title { display: block; font-weight: bold; text-transform: capitalize; margin-bottom: 4px; border-bottom: 1px solid #eee; }
        #reward-ui { background: #fff3e0; padding: 12px; border-radius: 6px; border: 1px solid #ffe0b2; margin-top: 10px; }
		.hind-item {
			background: #f8f0fb;
			border-left: 4px solid var(--hind);
			border-radius: 4px;
			margin-bottom: 8px;
			padding: 8px;
			cursor: help;
		}
		.hind-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			font-weight: bold;
			font-size: 13px;
		}
		.hind-desc {
			font-size: 12px;
			color: #555;
			margin-top: 5px;
			font-style: italic;
			line-height: 1.3;
		}
		/* Container for the +/- and value */
		.control-group {
			display: flex;
			align-items: center;
			gap: 12px; /* This creates the margin between buttons and the value */
			background: #f8f9fa;
			padding: 4px 8px;
			border-radius: 6px;
			border: 1px solid #e0e0e0;
		}

		/* Updated Button Styles */
		.panel button {
			width: 28px;
			height: 28px;
			display: flex;
			align-items: center;
			justify-content: center;
			border: 1px solid #ccc;
			background: white;
			border-radius: 4px;
			font-size: 16px;
			font-weight: bold;
			color: var(--primary);
			transition: all 0.2s;
			padding: 0; /* Reset padding for circular/square look */
		}

		.panel button:hover {
			background: var(--primary);
			color: white;
			border-color: var(--primary);
		}

		.panel button:active {
			transform: scale(0.9);
		}

		/* Ensure the die value doesn't shift when changing */
		.die-val {
			min-width: 35px;
			text-align: center;
			font-family: 'Courier New', monospace; /* Monospace keeps it steady */
		}
		/* Keep the math buttons square */
		.control-group button {
			width: 28px;
			height: 28px;
			flex-shrink: 0; /* Prevents squishing */
		}

		/* Allow reward and reset buttons to be wide enough for text */
		#reward-ui button, 
		.panel > button, 
		#skill-add + button { 
			width: auto; 
			height: auto;
			padding: 6px 12px;
			min-width: 60px;
		}

		/* Fix the overlapping in the reward container */
		#reward-ui div {
			display: flex;
			flex-wrap: wrap; /* Allows buttons to wrap if the screen is narrow */
			gap: 10px;
			margin-top: 10px;
		}
		
		/* Style for the Reset button */
		button[onclick*="resetRewards"] {
			border-color: var(--error);
			color: var(--error);
			background: transparent;
		}

		button[onclick*="resetRewards"]:hover {
			background: var(--error);
			color: white;
		}

		/* Make reward buttons feel active when you have points */
		#reward-ui button:not([onclick*="reset"]) {
			background: #fff;
			border: 1px solid var(--edge);
			color: var(--edge);
		}

		#reward-ui button:not([onclick*="reset"]):hover {
			background: var(--edge);
			color: white;
		}
    </style>
</head>
<body>
    <div class="panel">
        <div class="header-inputs">
            <input type="text" id="char-name" placeholder="Hero Name">
            <select id="race-select"></select>
        </div>
        <div id="race-desc" style="font-size: 12px; color: #666; font-style: italic; margin-bottom: 15px;"></div>
        
        <div class="section-header">
            <h3 style="margin:0">Attributes</h3>
            <div id="attr-tracker" class="stat-pill">Points: 5</div>
        </div>
        <div id="attr-list"></div>

        <div class="section-header" style="margin-top:25px">
            <h3 style="margin:0">Skills</h3>
            <div id="skill-tracker" class="stat-pill">Points: 12</div>
        </div>
        <div id="active-skills"></div>
        <select id="skill-add" style="width:100%; margin-top:10px"></select>
    </div>

    <div class="panel">
        <div class="derived-bar">
            <div class="stat-box"><span>Pace</span><strong id="stat-pace">6</strong></div>
            <div class="stat-box"><span>Parry</span><strong id="stat-parry">2</strong></div>
            <div class="stat-box"><span>Toughness</span><strong id="stat-tough">4</strong></div>
        </div>

        <div class="section-header">
            <h3 style="margin:0; color:var(--edge)">Edges</h3>
            <div id="edge-tracker" class="stat-pill">0 / 1</div>
        </div>
        <div id="edge-list" style="margin-bottom: 20px;"></div>

        <div class="section-header">
            <h3 style="margin:0; color:var(--hind)">Hindrances</h3>
            <div id="hind-bank" class="stat-pill" style="background:var(--accent)">Bank: 0</div>
        </div>
        <div id="active-hindrances"></div>
        <select id="hindrance-add" style="width:100%; margin-top:10px"></select>

        <div id="reward-ui" style="display:none">
            <small><strong>Spend Hindrance Points:</strong></small>
            <div style="display:flex; gap:5px; margin-top:8px">
                <button onclick="window.spendPoints('attr')">Attr (2)</button>
                <button onclick="window.spendPoints('edge')">Edge (2)</button>
                <button onclick="window.spendPoints('skill')">Skill (1)</button>
                <button onclick="window.resetRewards()" style="color:var(--error)">Reset</button>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="section-header"><h3 style="margin:0; color:var(--gear)">Gear</h3></div>
        <div id="gear-list"></div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>